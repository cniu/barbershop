webpackJsonp([13],{QXzo:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"AddFlow",props:{modal_type:"",employee_list:"",singleItem:{flow_direction:"",item_type:"",money:0,created_by:"",item_number:"",comment:""}},data:function(){return{ruleValidate:{flow_direction:[{required:!0,message:"请选择"}],item_type:[{required:!0,message:"请选择类型"}],money:[{required:!0,message:"请填写金额"},{type:"number",message:"错误金额"}],created_by:[{required:!0,message:"请选择开卡人"}],comment:[{required:!0,message:"请输入备注",trigger:"blur"},{type:"string",max:200,message:"太长不易读",trigger:"blur"}]}}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(s){if(s){t.$http.post("/handle_flow/single_item",t.singleItem).then(function(s){var a=s.data;"success"!=a.status?t.$Message.error(a.message):(t.$Message.success("添加成功!"),t.$emit("closeModal","submit"),t.$refs[e].resetFields())},function(e){401==e.status&&t.$router.push({name:"login"})})}else t.$Message.error("请查看是否填写完必须输入的项!")})},handleReset:function(e){this.$refs[e].resetFields()}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Row",[s("Form",{ref:"singleItem",attrs:{model:e.singleItem,rules:e.ruleValidate,"label-width":80}},[s("FormItem",{staticStyle:{display:"none"},attrs:{label:"单号",prop:"item"}},[s("Input",{attrs:{disabled:""},model:{value:e.singleItem.item_number,callback:function(t){e.$set(e.singleItem,"item_number",t)},expression:"singleItem.item_number"}})],1),e._v(" "),s("FormItem",{attrs:{label:"类型",prop:"flow_direction"}},[s("RadioGroup",{model:{value:e.singleItem.flow_direction,callback:function(t){e.$set(e.singleItem,"flow_direction",t)},expression:"singleItem.flow_direction"}},[s("Radio",{attrs:{label:"出账"}},[e._v("出账")]),e._v(" "),s("Radio",{attrs:{label:"入账"}},[e._v("入账")])],1)],1),e._v(" "),s("FormItem",{attrs:{label:"金额",prop:"money"}},[s("InputNumber",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入金额"},model:{value:e.singleItem.money,callback:function(t){e.$set(e.singleItem,"money",t)},expression:"singleItem.money"}})],1),e._v(" "),s("FormItem",{attrs:{label:"条目类别",prop:"item_type"}},[s("Select",{attrs:{placeholder:"请选择条目类别"},model:{value:e.singleItem.item_type,callback:function(t){e.$set(e.singleItem,"item_type",t)},expression:"singleItem.item_type"}},[s("Option",{attrs:{value:"工资"}},[e._v("工资")]),e._v(" "),s("Option",{attrs:{value:"房租"}},[e._v("房租")]),e._v(" "),s("Option",{attrs:{value:"日常费用"}},[e._v("日常费用")]),e._v(" "),s("Option",{attrs:{value:"其他"}},[e._v("其他")])],1)],1),e._v(" "),s("FormItem",{attrs:{label:"操作员",prop:"created_by"}},[s("Select",{attrs:{placeholder:"请选择操作员"},model:{value:e.singleItem.created_by,callback:function(t){e.$set(e.singleItem,"created_by",t)},expression:"singleItem.created_by"}},e._l(e.employee_list,function(t,a){return s("Option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),s("FormItem",{attrs:{label:"备注",prop:"comment"}},[s("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"可以输入备注以便记录"},model:{value:e.singleItem.comment,callback:function(t){e.$set(e.singleItem,"comment",t)},expression:"singleItem.comment"}})],1),e._v(" "),s("FormItem",[s("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("singleItem")}}},[e._v("提交")]),e._v(" "),s("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.handleReset("singleItem")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]},o={name:"CashFlow",components:{AddFlow:s("VU/8")(a,l,!1,null,null,null).exports},data:function(){return{singleItem:{},modal_type:"add",modal_title:"添加其他出账入账记录",singleModal:!1,employee_list:"",search:"",page:1,page_size:20,total_count:0,order:"desc",order_key:"created_time",items_data:[],columns:[{title:"编号",key:"raw_id",width:80},{title:"资金变动类别",key:"reason",sortable:"custom"},{title:"消费单号",key:"sell_item_number",sortable:"custom"},{title:"金额",key:"money",sortable:"custom"},{title:"金额流向",key:"flow_direction",sortable:"custom"},{title:"备注",key:"comment",sortable:"custom"},{title:"开单时间",key:"created_time",sortable:"custom"}]}},computed:{},watch:{},created:function(){this.getItems(),this.getEmployees()},methods:{getItems:function(){var e=this,t="/cash_flow?";t+="page="+this.page,t+="&page_size="+this.page_size,t+="&order="+this.order,t+="&order_key="+this.order_key,this.$http.post(t,{search:this.search}).then(function(t){var s=t.data;e.items_data=s.data,e.total_count=s.total_count,e.page=s.page,"success"!=s.status&&e.$Message.error(s.message)},function(t){401==t.status&&e.$router.push({name:"login"})})},getEmployees:function(){var e=this;this.$http.get("/summarized_employees").then(function(t){var s=t.data;e.employee_list=s.employee_list,"success"!=s.status&&e.$Message.error(s.message)},function(t){401==t.status&&e.$router.push({name:"login"})})},handleSearch:function(e){this.search=e,this.getItems()},changePage:function(e){this.page=e,this.getItems()},changePageSize:function(e){this.page_size=e,this.getItems()},sortChange:function(e){this.order=e.order,this.order_key=e.key,this.getItems()},addItem:function(){this.modal_type="add",this.modal_title="添加其他出账入账记录",this.singleItem={},this.singleModal=!0,this.getItems()},closeModal:function(e){this.singleModal=!1,this.getItems()}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Row",{staticClass:"code-row-bg",staticStyle:{padding:"10px"},attrs:{type:"flex",justify:"end"}},[s("Col",{attrs:{span:"4"}},[s("Button",{attrs:{type:"primary",shape:"circle"},on:{click:e.addItem}},[e._v("添加其他出账入账记录")])],1),e._v(" "),s("Col",{attrs:{span:"8",offset:"12"}},[s("Input",{staticStyle:{width:"300px",float:"right"},attrs:{search:"","enter-button":"",placeholder:"请输入关键字搜索"},on:{"on-search":e.handleSearch},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),s("Row",{staticClass:"code-row-bg",staticStyle:{padding:"10px"},attrs:{type:"flex",justify:"start"}},[s("Col",{attrs:{span:"24"}},[s("Table",{attrs:{border:"",columns:e.columns,data:e.items_data},on:{"on-sort-change":e.sortChange}})],1)],1),e._v(" "),s("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"end"}},[s("Col",{attrs:{span:"24"}},[s("Page",{staticStyle:{float:"right"},attrs:{total:e.total_count,"show-total":"","show-sizer":"",current:e.page,"page-size":e.page_size,"page-size-opts":[20,50,100,500]},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),e._v(" "),s("Modal",{attrs:{"footer-hide":"",title:e.modal_title},model:{value:e.singleModal,callback:function(t){e.singleModal=t},expression:"singleModal"}},[s("AddFlow",{attrs:{singleItem:e.singleItem,modal_type:e.modal_type,employee_list:e.employee_list},on:{closeModal:e.closeModal}})],1)],1)},staticRenderFns:[]},n=s("VU/8")(o,i,!1,null,null,null).exports;t.default=n}});
//# sourceMappingURL=13.93b77368af2b333c8db3.js.map