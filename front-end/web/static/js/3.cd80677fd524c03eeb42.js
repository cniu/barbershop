webpackJsonp([3],{ClvS:function(e,t,s){e.exports=s.p+"static/img/barber-razor-scissor.b182e4b.png"},EPwg:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("K/Vw"),l=s("ClvS"),i=s.n(l),n=s("iQH9"),r=s.n(n),o={name:"Index",components:{SellItem:a.a},data:function(){return{logo:"",box_img:"",current_user:"",sellItemModal:!1,modal_type:"add",hairdresser_list:[],assistant_list:[],fellow_list:[],sellItem:{hairdresser:"",assistant:"",item_type:[],money:"",pay_type:"",fellow:"",comment:"",item_number:""}}},created:function(){var e=this;this.box_img=i.a,this.logo=r.a,this.getEmployees(),this.getFellows(),this.$http.get("/api/user").then(function(t){e.current_user=t.data.name},function(t){e.$router.push({name:"login"})})},methods:{getEmployees:function(){var e=this;this.$http.get("/summarized_employees").then(function(t){var s=t.data;e.hairdresser_list=s.hairdresser_list,e.assistant_list=s.assistant_list,"success"!=s.status&&e.$Message.error(s.message)},function(t){401==t.status&&e.$router.push({name:"login"})})},getFellows:function(){var e=this;this.$http.get("/summarized_fellows").then(function(t){var s=t.data;e.fellow_list=s.response_list,"success"!=s.status&&e.$Message.error(s.message)},function(t){401==t.status&&e.$router.push({name:"login"})})},quit:function(){var e=this;this.$http.get("/logout").then(function(t){e.$Message.success("退出成功！"+t.data.message),e.$router.push({name:"login"})},function(e){})},enter_admin:function(){this.$router.push({name:"dashboard"})},addSellItem:function(){this.sellItemModal=!0},closeSellItemModal:function(){this.sellItemModal=!1}}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Layout",[s("Header",{staticClass:"layout-header-bar",style:{position:"fixed",width:"100%",display:"flex",padding:"0",height:"60px",flexDirection:"column",zIndex:20}},[s("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between",position:"relative",height:"60px","line-height":"60px","z-index":"1","box-shadow":"0 2px 1px 1px rgba(100, 100, 100, 0.1)"}},[s("div",{staticStyle:{display:"flex","align-items":"center","padding-left":"100px"}},[s("span",{staticStyle:{"font-size":"18px","font-weight":"bold"}},[e._v("日常功能区")]),e._v(" "),s("span",{staticStyle:{"font-size":"14px","padding-left":"20px"}},[e._v("欢迎光临！ "+e._s(e.current_user))])]),e._v(" "),s("div",{staticStyle:{"margin-right":"20px"}},[s("Button",{attrs:{type:"text",icon:"ios-apps",size:"large"},on:{click:e.enter_admin}},[e._v("进入管理页面")]),e._v(" "),s("Button",{attrs:{type:"text",icon:"ios-exit",size:"large"},on:{click:e.quit}},[e._v("退出系统")])],1)])]),e._v(" "),s("Content",{staticClass:"index_background",style:{height:"calc(100% - 60px)",position:"absolute",top:"60px",overflow:"auto",padding:"10px",width:"100%"}},[s("Row",{staticClass:"row_box",attrs:{gutter:120}},[s("Col",{attrs:{span:"8"}},[s("Card",[s("div",{staticStyle:{"text-align":"center"},on:{click:e.addSellItem}},[s("img",{attrs:{src:e.box_img}}),e._v(" "),s("h3",[e._v("开单")])])])],1),e._v(" "),s("Col",{attrs:{span:"8"}},[s("Card",[s("div",{staticStyle:{"text-align":"center"}},[s("img",{attrs:{src:e.box_img}}),e._v(" "),s("h3",[e._v("充值")])])])],1),e._v(" "),s("Col",{attrs:{span:"8"}},[s("Card",[s("div",{staticStyle:{"text-align":"center"}},[s("img",{attrs:{src:e.box_img}}),e._v(" "),s("h3",[e._v("开卡")])])])],1)],1),e._v(" "),s("Row",{staticClass:"row_box",attrs:{gutter:120}},[s("Col",{attrs:{span:"8"}},[s("Card",[s("div",{staticStyle:{"text-align":"center"}},[s("img",{attrs:{src:e.box_img}}),e._v(" "),s("h3",[e._v("产品消费")])])])],1),e._v(" "),s("Col",{attrs:{span:"8"}},[s("Card",[s("div",{staticStyle:{"text-align":"center"}},[s("img",{attrs:{src:e.box_img}}),e._v(" "),s("h3",[e._v("其他")])])])],1)],1)],1)],1),e._v(" "),s("Modal",{attrs:{"footer-hide":"",title:"开单"},model:{value:e.sellItemModal,callback:function(t){e.sellItemModal=t},expression:"sellItemModal"}},[s("SellItem",{attrs:{singleItem:e.sellItem,modal_type:e.modal_type,hairdresser_list:e.hairdresser_list,assistant_list:e.assistant_list,fellow_list:e.fellow_list},on:{closeModal:e.closeSellItemModal}})],1)],1)},staticRenderFns:[]};var c=s("VU/8")(o,m,!1,function(e){s("nZBG")},"data-v-87f0f826",null).exports;t.default=c},"K/Vw":function(e,t,s){"use strict";var a={name:"SellItem",props:{hairdresser_list:"",assistant_list:"",fellow_list:"",modal_type:"",singleItem:{hairdresser:"",assistant:"",item_type:[],money:"",pay_type:"",fellow:"",comment:"",item_number:""}},data:function(){return{ruleValidate:{hairdresser:[{required:!0,message:"请选择发型师"}],assistant:[{required:!0,message:"请选择助理"}],pay_type:[{required:!0,message:"请选择付款类型"}],money:[{required:!0,message:"请填写金额"},{type:"number",message:"错误金额"}],item_type:[{required:!0,type:"array",message:"请选择消费类型"}],fellow:[{required:!1,message:"请输入会员手机号"}],comment:[{required:!1,message:"请输入备注",trigger:"blur"},{type:"string",max:200,message:"太长不易读",trigger:"blur"}]}}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if("modify"==t.$props.modal_type){var s="/sell_item/"+t.singleItem.item_number;t.$http.put(s,t.singleItem).then(function(e){var s=e.data;"success"!=s.status&&t.$Message.error(s.message),t.$Message.success("修改成功!"),t.$emit("closeModal","submit")},function(e){401==e.status&&t.$router.push({name:"login"})})}else if("add"==t.$props.modal_type){s="/sell_item/1";t.singleItem.item_type=t.singleItem.item_type.join(","),t.$http.post(s,t.singleItem).then(function(e){var s=e.data;"success"!=s.status&&t.$Message.error(s.message),t.$Message.success("新增成功!"),t.$emit("closeModal","submit")},function(e){401==e.status&&t.$router.push({name:"login"})})}}else t.$Message.error("请查看是否填写完必须输入的项!")})},handleReset:function(e){this.$refs[e].resetFields()},showFellowInfo:function(){var e=this,t=this.fellow_list.filter(function(t){return t.value==e.singleItem.fellow}),s="<p>姓名："+t[0].name+"</p><p>卡类型："+t[0].card_type+"</p><p>余额："+t[0].money+"</p><p>手机号："+t[0].value+"</p>";this.$Modal.success({title:"会员信息",content:s})},getFellowList:function(e){}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Row",[s("Form",{ref:"singleItem",attrs:{model:e.singleItem,rules:e.ruleValidate,"label-width":80}},[s("FormItem",{staticStyle:{display:"none"},attrs:{label:"单号",prop:"item"}},[s("Input",{attrs:{disabled:""},model:{value:e.singleItem.item_number,callback:function(t){e.$set(e.singleItem,"item_number",t)},expression:"singleItem.item_number"}})],1),e._v(" "),s("FormItem",{attrs:{label:"发型师",prop:"hairdresser"}},[s("Select",{attrs:{placeholder:"请选择发型师"},model:{value:e.singleItem.hairdresser,callback:function(t){e.$set(e.singleItem,"hairdresser",t)},expression:"singleItem.hairdresser"}},e._l(e.hairdresser_list,function(t,a){return s("Option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),s("FormItem",{attrs:{label:"助理",prop:"assistant"}},[s("Select",{attrs:{placeholder:"请选择助理"},model:{value:e.singleItem.assistant,callback:function(t){e.$set(e.singleItem,"assistant",t)},expression:"singleItem.assistant"}},e._l(e.assistant_list,function(t,a){return s("Option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),s("FormItem",{attrs:{label:"消费类型",prop:"item_type"}},[s("CheckboxGroup",{model:{value:e.singleItem.item_type,callback:function(t){e.$set(e.singleItem,"item_type",t)},expression:"singleItem.item_type"}},[s("Checkbox",{attrs:{label:"染发"}}),e._v(" "),s("Checkbox",{attrs:{label:"烫发"}}),e._v(" "),s("Checkbox",{attrs:{label:"假发"}}),e._v(" "),s("Checkbox",{attrs:{label:"洗头"}})],1)],1),e._v(" "),s("FormItem",{attrs:{label:"消费金额",prop:"money"}},[s("InputNumber",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入金额"},model:{value:e.singleItem.money,callback:function(t){e.$set(e.singleItem,"money",t)},expression:"singleItem.money"}})],1),e._v(" "),s("FormItem",{attrs:{label:"付款类型",prop:"pay_type"}},[s("RadioGroup",{model:{value:e.singleItem.pay_type,callback:function(t){e.$set(e.singleItem,"pay_type",t)},expression:"singleItem.pay_type"}},[s("Radio",{attrs:{label:"现金"}},[e._v("现金")]),e._v(" "),s("Radio",{attrs:{label:"微信"}},[e._v("微信")]),e._v(" "),s("Radio",{attrs:{label:"支付宝"}},[e._v("支付宝")]),e._v(" "),s("Radio",{attrs:{label:"刷卡"}},[e._v("刷卡")])],1)],1),e._v(" "),s("FormItem",{attrs:{label:"会员",prop:"fellow"}},[s("Row",[s("Col",{attrs:{span:"16"}},[s("Select",{staticStyle:{width:"180px"},attrs:{filterable:""},model:{value:e.singleItem.fellow,callback:function(t){e.$set(e.singleItem,"fellow",t)},expression:"singleItem.fellow"}},e._l(e.fellow_list,function(t,a){return s("Option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),s("Col",{attrs:{span:"8"}},[s("Button",{attrs:{type:"primary",size:"small"},on:{click:e.showFellowInfo}},[e._v("查看会员信息")])],1)],1)],1),e._v(" "),s("FormItem",{attrs:{label:"备注",prop:"comment"}},[s("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"可以输入备注以便记录"},model:{value:e.singleItem.comment,callback:function(t){e.$set(e.singleItem,"comment",t)},expression:"singleItem.comment"}})],1),e._v(" "),s("FormItem",[s("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("singleItem")}}},[e._v("Submit")]),e._v(" "),s("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.handleReset("singleItem")}}},[e._v("Reset")])],1)],1)],1)},staticRenderFns:[]},i=s("VU/8")(a,l,!1,null,null,null);t.a=i.exports},nZBG:function(e,t){}});
//# sourceMappingURL=3.cd80677fd524c03eeb42.js.map