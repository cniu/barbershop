{"version":3,"sources":["webpack:///src/components/setting/fellow-type/sell-item.vue","webpack:///./src/components/setting/fellow-type/sell-item.vue?d6ff","webpack:///src/components/setting/fellow-type/fellow-type.vue","webpack:///./src/components/setting/fellow-type/sell-item.vue","webpack:///./src/components/setting/fellow-type/fellow-type.vue?e4b0","webpack:///./src/components/setting/fellow-type/fellow-type.vue","webpack:///./src/components/setting/fellow-type/index.js"],"names":["sell_item","name","props","modal_type","singleItem","card_type_name","discount","comment","item_number","data","ruleValidate","required","message","trigger","type","max","methods","handleSubmit","_this","this","$refs","validate","valid","$props","post_URL","baseAPIUrl","$http","put","then","response","res","$Message","error","success","$emit","status","$router","push","handleReset","resetFields","showFellowInfo","_this2","fellow_info","fellow_list","filter","item","fellow","content","$Modal","title","getFellowList","query","fellow_type_sell_item","render","_vm","_h","$createElement","_c","_self","ref","attrs","model","rules","label-width","staticStyle","display","label","prop","disabled","value","callback","$$v","$set","expression","_v","width","placeholder","min","step","autosize","minRows","maxRows","on","click","$event","margin-left","staticRenderFns","fellow_type","components","FellowType","__webpack_require__","normalizeComponent","singleModal","search","page","page_size","total_count","order","order_key","fellow_type_data","columns","key","sortable","ellipsis","align","h","params","size","style","marginRight","modifyItem","index","removeItem","computed","watch","created","getFellowTypes","fellow_type_baseAPIUrl","post","handleSearch","assign_default","changePage","changePageSize","sortChange","visibleChange","closeModal","text","fellow_type_fellow_type","staticClass","justify","span","float","enter-button","on-search","padding","border","on-sort-change","total","show-total","show-sizer","current","page-size","page-size-opts","on-change","on-page-size-change","footer-hide","on-visible-change","setting_fellow_type_fellow_type","fellow_type_normalizeComponent","FellowTypeManage"],"mappings":"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","file":"static/js/7.54807a2fa65319566a05.js","sourcesContent":["<template>\r\n    <Row>\r\n        <Form ref=\"singleItem\" :model=\"singleItem\" :rules=\"ruleValidate\" :label-width=\"80\">\r\n            <FormItem label=\"单号\" prop=\"item\" style=\"display: none;\">\r\n                <Input disabled v-model=\"singleItem.item_number\"></Input>\r\n            </FormItem>\r\n            <FormItem label=\"卡类型\" prop=\"card_type_name\">\r\n                <Input style=\"width: 180px;\" v-model=\"singleItem.card_type_name\" placeholder=\"请输入卡类型名称\"></Input>\r\n            </FormItem>\r\n            <FormItem label=\"打折比率\" prop=\"discount\">\r\n                <InputNumber style=\"width: 180px;\" v-model=\"singleItem.discount\" :max=\"1\" :min=\"0\" :step=\"0.1\" placeholder=\"请输入比率\"></InputNumber>\r\n            </FormItem>\r\n            <FormItem label=\"备注\" prop=\"comment\">\r\n                <Input v-model=\"singleItem.comment\" type=\"textarea\" :autosize=\"{minRows: 2,maxRows: 5}\" placeholder=\"可以输入备注以便记录\"></Input>\r\n            </FormItem>\r\n            <FormItem>\r\n                <Button type=\"primary\" @click=\"handleSubmit('singleItem')\">Submit</Button>\r\n                <Button @click=\"handleReset('singleItem')\" style=\"margin-left: 8px\">Reset</Button>\r\n            </FormItem>\r\n        </Form>\r\n    </Row>\r\n</template>\r\n<script>\r\nconst baseAPIUrl = process.env.baseAPIUrl;\r\nexport default {\r\n    name: \"SellItem\",\r\n    props: {\r\n        modal_type: '',\r\n        singleItem: {\r\n            card_type_name: '',\r\n            discount: 0,\r\n            comment: '',\r\n            item_number: ''\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            ruleValidate: {\r\n                card_type_name: [\r\n                    { required: true, message: '请输入名称' }\r\n                ],\r\n                discount: [\r\n                    { required: true, message: '请填写折扣' }\r\n                ],\r\n                comment: [\r\n                    { required: false, message: '请输入备注', trigger: 'blur' },\r\n                    { type: 'string', max: 200, message: '太长不易读', trigger: 'blur' }\r\n                ]\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        handleSubmit (name) {\r\n            this.$refs[name].validate((valid) => {\r\n                if (valid) {\r\n                    if(this.$props.modal_type == \"modify\"){\r\n\r\n                        var post_URL = baseAPIUrl + \"setting/fellow_type/\" + this.singleItem.item_number;\r\n\r\n                        this.$http.put(post_URL, this.singleItem).then(response => {\r\n                            const res = response.data;\r\n                            if(res['status'] != \"success\")\r\n                                this.$Message.error(res['message']);\r\n\r\n                            this.$Message.success('修改成功!');\r\n                            this.$emit('closeModal', 'submit');\r\n                        }, response => {\r\n                            if(response.status == 401){\r\n                              // this.$Message.error('请登陆');\r\n                              this.$router.push({\r\n                                name: \"login\"\r\n                              });\r\n                            }\r\n                        });\r\n                    }\r\n                    else if(this.$props.modal_type == \"add\"){\r\n                        // var post_URL = baseAPIUrl + \"sell_item/1\";\r\n                        // this.singleItem.item_type = this.singleItem.item_type.join(\",\");\r\n                        // this.$http.post(post_URL, this.singleItem).then(response => {\r\n                        //     const res = response.data;\r\n                        //     if(res['status'] != \"success\")\r\n                        //         this.$Message.error(res['message']);\r\n\r\n                        //     this.$Message.success('新增成功!');\r\n                        //     this.$emit('closeModal', 'submit');\r\n                        // }, response => {\r\n                        //     if(response.status == 401){\r\n                        //       // this.$Message.error('请登陆');\r\n                        //       this.$router.push({\r\n                        //         name: \"login\"\r\n                        //       });\r\n                        //     }\r\n                        // });\r\n                    }\r\n                } else {\r\n                    this.$Message.error('请查看是否填写完必须输入的项!');\r\n                }\r\n            })\r\n        },\r\n        handleReset (name) {\r\n            this.$refs[name].resetFields();\r\n        },\r\n        showFellowInfo () {\r\n            const fellow_info = this.fellow_list.filter(item => item['value'] == this.singleItem.fellow);\r\n            const content = \r\n                '<p>姓名：' + fellow_info[0]['name'] + '</p>' +\r\n                '<p>卡类型：' + fellow_info[0]['card_type'] + '</p>' +\r\n                '<p>余额：' + fellow_info[0]['money'] + '</p>' + \r\n                '<p>手机号：' + fellow_info[0]['value'] + '</p>';\r\n            this.$Modal.success({\r\n                title: \"会员信息\",\r\n                content: content\r\n            });\r\n        },\r\n        getFellowList (query) {\r\n            // if (query !== '') {\r\n            //     this.fellow_loading = true;\r\n            //     setTimeout(() => {\r\n            //         this.fellow_loading = false;\r\n            //         const list = this.list.map(item => {\r\n            //             return {\r\n            //                 value: item,\r\n            //                 label: item\r\n            //             };\r\n            //         });\r\n            //         this.fellow_list = list.filter(item => item.label.toLowerCase().indexOf(query.toLowerCase()) > -1);\r\n            //     }, 200);\r\n            // } else {\r\n            //     this.fellow_list = [];\r\n            // }\r\n        }\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/setting/fellow-type/sell-item.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Row',[_c('Form',{ref:\"singleItem\",attrs:{\"model\":_vm.singleItem,\"rules\":_vm.ruleValidate,\"label-width\":80}},[_c('FormItem',{staticStyle:{\"display\":\"none\"},attrs:{\"label\":\"单号\",\"prop\":\"item\"}},[_c('Input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.singleItem.item_number),callback:function ($$v) {_vm.$set(_vm.singleItem, \"item_number\", $$v)},expression:\"singleItem.item_number\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"卡类型\",\"prop\":\"card_type_name\"}},[_c('Input',{staticStyle:{\"width\":\"180px\"},attrs:{\"placeholder\":\"请输入卡类型名称\"},model:{value:(_vm.singleItem.card_type_name),callback:function ($$v) {_vm.$set(_vm.singleItem, \"card_type_name\", $$v)},expression:\"singleItem.card_type_name\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"打折比率\",\"prop\":\"discount\"}},[_c('InputNumber',{staticStyle:{\"width\":\"180px\"},attrs:{\"max\":1,\"min\":0,\"step\":0.1,\"placeholder\":\"请输入比率\"},model:{value:(_vm.singleItem.discount),callback:function ($$v) {_vm.$set(_vm.singleItem, \"discount\", $$v)},expression:\"singleItem.discount\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"备注\",\"prop\":\"comment\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 2,maxRows: 5},\"placeholder\":\"可以输入备注以便记录\"},model:{value:(_vm.singleItem.comment),callback:function ($$v) {_vm.$set(_vm.singleItem, \"comment\", $$v)},expression:\"singleItem.comment\"}})],1),_vm._v(\" \"),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleSubmit('singleItem')}}},[_vm._v(\"Submit\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-left\":\"8px\"},on:{\"click\":function($event){_vm.handleReset('singleItem')}}},[_vm._v(\"Reset\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0256cec1\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/setting/fellow-type/sell-item.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div>\r\n        <Row type=\"flex\" justify=\"end\" class=\"code-row-bg\">\r\n            <Col span=\"8\">\r\n                <Input search enter-button placeholder=\"请输入关键字搜索\" style=\"width: 300px;float: right;\" @on-search=\"handleSearch\" v-model=\"search\"/>\r\n            </Col>\r\n        </Row>\r\n        <Row type=\"flex\" justify=\"start\" class=\"code-row-bg\" style=\"padding: 10px;\">\r\n            <Col span=\"24\">\r\n                <Table border :columns=\"columns\" :data=\"fellow_type_data\" @on-sort-change=\"sortChange\"></Table>\r\n            </Col>\r\n        </Row>\r\n        <Row type=\"flex\" justify=\"end\" class=\"code-row-bg\">\r\n            <Col span=\"24\">\r\n                <Page :total=\"total_count\" show-total show-sizer :current=\"page\" :page-size=\"page_size\" :page-size-opts=[20,50,100,500] @on-change=\"changePage\" @on-page-size-change=\"changePageSize\" style=\"float: right;\"/>\r\n            </Col>\r\n        </Row>\r\n        <Modal\r\n            v-model=\"singleModal\" footer-hide\r\n            title=\"修改类别\"\r\n            @on-visible-change=\"visibleChange\">\r\n            <FellowType :singleItem=\"singleItem\" :modal_type=\"modal_type\" @closeModal=\"closeModal\"></FellowType>\r\n        </Modal>\r\n    </div>\r\n</template>\r\n<script>\r\nimport FellowType from './sell-item.vue'\r\nconst baseAPIUrl = process.env.baseAPIUrl;\r\nexport default {\r\n    name: \"FellowTypeManage\",\r\n    components: {\r\n        FellowType\r\n    },\r\n    data () {\r\n        return {\r\n            singleItem: {},\r\n            modal_type: \"modify\",\r\n            singleModal: false,\r\n            search: '',\r\n            page: 1,\r\n            page_size: 20,\r\n            total_count: 0,\r\n            order: \"desc\",\r\n            order_key: \"created_time\",\r\n            fellow_type_data: [],\r\n            columns: [\r\n                {\r\n                    title: '编号',\r\n                    key: 'raw_id',\r\n                    width: 80\r\n                },\r\n                {\r\n                    title: '会员卡类型名称',\r\n                    key: 'card_type_name',\r\n                    sortable: 'custom'\r\n                },\r\n                {\r\n                    title: '打折比率',\r\n                    key: 'discount',\r\n                    sortable: 'custom'\r\n                },\r\n                {\r\n                    title: '备注',\r\n                    key: 'comment',\r\n                    ellipsis: true,\r\n                    sortable: 'custom'\r\n                },\r\n                {\r\n                    title: '更新时间',\r\n                    key: 'created_time',\r\n                    sortable: 'custom'\r\n                },\r\n                {\r\n                    title: 'Action',\r\n                    key: 'action',\r\n                    width: 150,\r\n                    align: 'center',\r\n                    render: (h, params) => {\r\n                        return h('div', [\r\n                            h('Button', {\r\n                                props: {\r\n                                    type: 'primary',\r\n                                    size: 'small'\r\n                                },\r\n                                style: {\r\n                                    marginRight: '5px'\r\n                                },\r\n                                on: {\r\n                                    click: () => {\r\n                                        this.modifyItem(params.index)\r\n                                    }\r\n                                }\r\n                            }, '编辑'),\r\n                            h('Button', {\r\n                                props: {\r\n                                    type: 'error',\r\n                                    size: 'small'\r\n                                },\r\n                                on: {\r\n                                    click: () => {\r\n                                        this.removeItem(params.index)\r\n                                    }\r\n                                }\r\n                            }, '删除')\r\n                        ]);\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    computed: {\r\n    },\r\n    watch: {\r\n    },\r\n    created: function() {\r\n        this.getFellowTypes();\r\n    },\r\n    methods: {\r\n        getFellowTypes() {\r\n            var post_URL = baseAPIUrl + \"setting/fellow_types?\";\r\n            post_URL += \"page=\" + this.page;\r\n            post_URL += \"&page_size=\" + this.page_size;\r\n            post_URL += \"&order=\" + this.order;\r\n            post_URL += \"&order_key=\" + this.order_key;\r\n\r\n            this.$http.post(post_URL, {search: this.search}).then(response => {\r\n                const res = response.data;\r\n                this.fellow_type_data = res['data'];\r\n                this.total_count = res['total_count'];\r\n                this.page = res['page'];\r\n                if(res['status'] != \"success\")\r\n                    this.$Message.error(res['message']);\r\n            }, response => {\r\n                if(response.status == 401){\r\n                  // this.$Message.error('请登陆');\r\n                  this.$router.push({\r\n                    name: \"login\"\r\n                  });\r\n                }\r\n            });\r\n        },\r\n        handleSearch(value) {\r\n            this.search = value;\r\n            this.getFellowTypes();\r\n        },\r\n        modifyItem(index) {\r\n            this.singleModal = true;\r\n            this.singleItem = Object.assign({}, this.fellow_type_data[index]);\r\n        },\r\n        changePage(page) {\r\n            this.page = page;\r\n            this.getFellowTypes();\r\n        },\r\n        changePageSize(page_size) {\r\n            this.page_size = page_size;\r\n            this.getFellowTypes();\r\n        },\r\n        sortChange(value){\r\n            this.order = value.order;\r\n            this.order_key = value.key;\r\n            this.getFellowTypes();\r\n        },\r\n        visibleChange(status) {\r\n            this.singleModal = status;\r\n        },\r\n        closeModal(text) {\r\n            this.singleModal = false;\r\n            this.getFellowTypes();\r\n        },\r\n        removeItem() {\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/setting/fellow-type/fellow-type.vue","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./sell-item.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./sell-item.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0256cec1\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./sell-item.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/setting/fellow-type/sell-item.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Row',{staticClass:\"code-row-bg\",attrs:{\"type\":\"flex\",\"justify\":\"end\"}},[_c('Col',{attrs:{\"span\":\"8\"}},[_c('Input',{staticStyle:{\"width\":\"300px\",\"float\":\"right\"},attrs:{\"search\":\"\",\"enter-button\":\"\",\"placeholder\":\"请输入关键字搜索\"},on:{\"on-search\":_vm.handleSearch},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1)],1),_vm._v(\" \"),_c('Row',{staticClass:\"code-row-bg\",staticStyle:{\"padding\":\"10px\"},attrs:{\"type\":\"flex\",\"justify\":\"start\"}},[_c('Col',{attrs:{\"span\":\"24\"}},[_c('Table',{attrs:{\"border\":\"\",\"columns\":_vm.columns,\"data\":_vm.fellow_type_data},on:{\"on-sort-change\":_vm.sortChange}})],1)],1),_vm._v(\" \"),_c('Row',{staticClass:\"code-row-bg\",attrs:{\"type\":\"flex\",\"justify\":\"end\"}},[_c('Col',{attrs:{\"span\":\"24\"}},[_c('Page',{staticStyle:{\"float\":\"right\"},attrs:{\"total\":_vm.total_count,\"show-total\":\"\",\"show-sizer\":\"\",\"current\":_vm.page,\"page-size\":_vm.page_size,\"page-size-opts\":[20,50,100,500]},on:{\"on-change\":_vm.changePage,\"on-page-size-change\":_vm.changePageSize}})],1)],1),_vm._v(\" \"),_c('Modal',{attrs:{\"footer-hide\":\"\",\"title\":\"修改类别\"},on:{\"on-visible-change\":_vm.visibleChange},model:{value:(_vm.singleModal),callback:function ($$v) {_vm.singleModal=$$v},expression:\"singleModal\"}},[_c('FellowType',{attrs:{\"singleItem\":_vm.singleItem,\"modal_type\":_vm.modal_type},on:{\"closeModal\":_vm.closeModal}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-280888ee\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/setting/fellow-type/fellow-type.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./fellow-type.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./fellow-type.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-280888ee\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./fellow-type.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/setting/fellow-type/fellow-type.vue\n// module id = null\n// module chunks = ","import FellowTypeManage from './fellow-type.vue'\r\nexport default FellowTypeManage \r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/setting/fellow-type/index.js"],"sourceRoot":""}